<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Testimonials - Sterling Dental Clinic</title>
  <link rel="stylesheet" href="styles.css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
  />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }

    h1 {
      color: #007bff;
      text-align: center;
      margin-bottom: 30px;
    }

    nav {
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 12px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 1rem;
    }

    nav a:hover {
      text-decoration: underline;
    }

    /* Burger button */
    .burger {
      display: none;
      cursor: pointer;
      flex-direction: column;
      gap: 5px;
      background: none;
      border: none;
      padding: 0;
    }

    .burger div {
      width: 25px;
      height: 3px;
      background: white;
      border-radius: 2px;
      transition: all 0.3s ease;
      transform-origin: 4px 2px;
    }

    /* Burger active state (cross) */
    .burger.active div:nth-child(1) {
      transform: rotate(45deg) translate(5px, 5px);
    }

    .burger.active div:nth-child(2) {
      opacity: 0;
    }

    .burger.active div:nth-child(3) {
      transform: rotate(-45deg) translate(5px, -5px);
    }

    /* Responsive styles */
    @media (max-width: 768px) {
      .burger {
        display: flex;
      }

      nav {
        flex-direction: column;
        align-items: flex-start;
      }

      nav a {
        display: none;
        width: 100%;
        padding: 12px 0;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        justify-content: center;
      }

      nav.open a {
        display: flex;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content" style="display:flex; align-items:center; padding:10px 20px; color:white;">
      <a href="index.html#home" class="logo-link" style="margin-right: 15px;">
        <img src="sterlinglogo.jpg" alt="Sterling Dental Clinic Logo" class="logo" style="height:40px;" />
      </a>
      <div class="header-text">
        <h1 style="margin:0; font-size:1.5rem; color:white;">Sterling Dental Clinic</h1>
        <p class="tagline" style="margin:0; font-size:0.9rem;">Your trusted partner for exceptional dental care in Kampala</p>
      </div>
    </div>
    <nav id="nav-menu" aria-label="Primary navigation">
      <button
        class="burger"
        id="burger"
        aria-label="Toggle navigation"
        aria-expanded="false"
        aria-controls="nav-menu"
      >
        <div></div>
        <div></div>
        <div></div>
      </button>
      <a href="index.html"><i class="fas fa-home"></i> Home</a>
      <a href="services.html"><i class="fas fa-teeth"></i> Services</a>
      <a href="about.html"><i class="fas fa-info-circle"></i> About Us</a>
      <a href="index.html#contact"><i class="fas fa-phone-alt"></i> Contact</a>
      <a href="testimonials.html"><i class="fas fa-quote-right testimonial-icon"></i> Testimonials</a>
      <a href="gallery.html"><i class="fas fa-images"></i> Gallery</a>
      <a href="index.html#appointment"><i class="fas fa-calendar-check"></i> Book Appointment</a>
    </nav>
  </header>
     <h1>What Our Clients Say</h1>
     <div class="form-container">
       <h2>Share Your Experience</h2>
       </div>
     </div>
     <div id="testimonials-container">
       <!-- Testimonials will be inserted here -->
     </div>

      <footer>
    <div style="max-width: 1000px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; text-align: left;">
      <div style="flex: 1; min-width: 200px; margin: 10px;">
        <h3>Sterling Dental Clinic</h3>
        <p>Providing exceptional dental care to Kampala since 2010.</p>
      </div>
      <div style="flex: 1; min-width: 200px; margin: 10px;">
        <h3>Quick Links</h3>
        <ul style="list-style: none; padding: 0;">
          <li><a href="index.html" style="color: #fff; text-decoration: none;">Home</a></li>
          <li><a href="services.html" style="color: #fff; text-decoration: none;">Services</a></li>
          <li><a href="about.html" style="color: #fff; text-decoration: none;">About Us</a></li>
          <li><a href="index.html" style="color: #fff; text-decoration: none;">Contact</a></li>
        </ul>
      </div>
      <div style="flex: 1; min-width: 200px; margin: 10px;">
        <h3>Contact Us</h3>
        <p>
          <i class="fas fa-map-marker-alt"></i> Garden City Mall, Kampala<br>
          <i class="fas fa-phone-alt"></i> +256 772 488592<br>
          <i class="fas fa-envelope"></i> info@kampalasterlingdentalclinic.com
        </p>
      </div>
    </div>
    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
      <p>Â© 2025 Sterling Dental Clinic. All rights reserved.</p>
      <div style="margin-top: 10px;">
        <a href="https://www.facebook.com/SterlingDentalPractice" style="color: #fff; margin: 0 10px; font-size: 20px;" title="Facebook"><i class="fab fa-facebook"></i></a>
        <a href="https://www.twitter.com/yourprofile" style="color: #fff; margin: 0 10px; font-size: 20px;" title="Twitter"><i class="fab fa-twitter"></i></a>
        <a href="https://www.linkedin.com/accessibility?openinweb=true" style="color: #fff; margin: 0 10px; font-size: 20px;" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
        <a href="https://www.instagram.com/sterlingdentalclinic?igsh=MjZpdXk1cWsxeHQ1" style="color: #fff; margin: 0 10px; font-size: 20px;" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="https://www.snapchat.com/add/sterlingdental?share_id=PbJexKFCMqA&locale=en-US" style="color: #fff; margin: 0 10px; font-size: 20px;" title="Snapchat"><i class="fab fa-snapchat"></i></a>
        <a href="https://www.tiktok.com/@sterlingdentalclinic?_t=ZM-8wcxw0G6gEf&_r=1" style="color: #fff; margin: 0 10px; font-size: 20px;" title="TikTok"><i class="fab fa-tiktok"></i></a>
        <a href="https://wa.me/message/MGRPNC4UBTNFD1" style="color: #fff; margin: 0 10px; font-size: 20px;" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
      </div>
    </div>
  </footer>

    <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
       <script>
    const supabase = Supabase.createClient(
  'https://emldrnonwflkbbnbughi.supabase.co', // Replace with your Supabase Project URL
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtbGRybm9ud2Zsa2JibmJ1Z2hpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgxOTEwMzQsImV4cCI6MjA2Mzc2NzAzNH0.R2PETzSHm0uGa-A62RjN9FJiQ2VSM_J5KcB7NeJ3AEU' // Replace with your Supabase Anon Key
);
    async function submitTestimonial() {
  const name = document.getElementById('name').value.trim();
  const message = document.getElementById('message').value.trim();
  const rating = parseInt(document.getElementById('rating').value);

  if (!name || !message || !rating) {
    alert('Please fill in all fields.');
    return;
  }

  try {
    const { error } = await supabase
      .from('testimonials')
      .insert([{ name, message, rating }]);

    if (error) {
      alert('Failed to submit testimonial: ' + error.message);
      return;
    }

    alert('Thank you for your testimonial!');
    document.getElementById('name').value = '';
    document.getElementById('message').value = '';
    document.getElementById('rating').value = '';
    loadTestimonials();
  } catch (err) {
    alert('Error submitting testimonial. Please try again later.');
    console.error(err);
  }
}

    try {
  console.log('Submitting testimonial:', { name, message, rating });
  const { error } = await supabase
    .from('testimonials')
    .insert([{ name, message, rating }]);
  if (error) {
    console.error('Supabase insert error:', error);
    alert('Failed to submit testimonial: ' + error.message);
    return;
  }
  console.log('Testimonial submitted successfully');
  alert('Thank you for your testimonial!');
  document.getElementById('name').value = '';
  document.getElementById('message').value = '';
  document.getElementById('rating').value = '';
  loadTestimonials();
} catch (err) {
  console.error('Unexpected error during submission:', err);
  alert('Error submitting testimonial. Please try again later.');
}
  </script>
    <script>
    const burger = document.getElementById('burger');
    const nav = document.getElementById('nav-menu');

    burger.addEventListener('click', () => {
      const expanded = burger.getAttribute('aria-expanded') === 'true';
      burger.setAttribute('aria-expanded', String(!expanded));
      burger.classList.toggle('active');
      nav.classList.toggle('open');
    });
  </script>
     <script>

document.addEventListener('DOMContentLoaded', () => {
  const container = document.getElementById('testimonials-container');
  const testimonials = JSON.parse(localStorage.getItem('testimonials') || '[]');

  if (testimonials.length === 0) {
    container.innerHTML = '<p>No testimonials yet.</p>';
    return;
  }

  container.innerHTML = testimonials.map(t => `
    <div class="testimonial-card" style="border: 1px solid #0056b3; border-radius: 8px; padding: 15px; margin-bottom: 15px; background: #f0f8ff;">
      <h3 style="color: #003366; margin: 0 0 5px;">${escapeHtml(t.name)}</h3>
      <div style="color: #ffc107; font-size: 1.2em; margin-bottom: 10px;">
        ${renderStars(t.rating)}
      </div>
      <p style="color: #000; margin: 0 0 10px;">${escapeHtml(t.message)}</p>
      <small style="color: #666;">${new Date(t.date).toLocaleDateString()}</small>
    </div>
  `).join('');

  function renderStars(rating) {
    let starsHtml = '';
    for (let i = 1; i <= 5; i++) {
      starsHtml += i <= rating ? 'â' : 'â';
    }
    return starsHtml;
  }

  // Simple escape to prevent HTML injection
  function escapeHtml(text) {
    return text.replace(/[&<>"']/g, (m) => ({
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    })[m]);
  }
});
  async function submitTestimonial() {
    const name = document.getElementById('name').value.trim();
    const message = document.getElementById('message').value.trim();

    if (!name || !message) {
      alert('Please fill in all fields.');
      return;
    }

    // For simplicity, set rating to 5 here or add rating input if you want
    const rating = 5;

    try {
      const res = await fetch('http://localhost:3000/testimonials', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, message, rating, email: 'anonymous@example.com' }) // email required by backend
      });

      const result = await res.json();

      if (res.ok) {
        alert('Thank you for your testimonial!');
        document.getElementById('name').value = '';
        document.getElementById('message').value = '';
        loadTestimonials();
      } else {
        alert(result.error || 'Failed to submit testimonial.');
      }
    } catch (err) {
      alert('Error submitting testimonial. Please try again later.');
      console.error(err);
    }
  }

  // Load testimonials on page load
  loadTestimonials();

  </script>
   </body>
   </html>
    
